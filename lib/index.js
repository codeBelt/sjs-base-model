!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.SjsBaseModel={})}(this,function(t){"use strict";var n,e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])};(n=t.ConversionTypeEnum||(t.ConversionTypeEnum={})).Number="number",n.Float="float",n.Boolean="boolean",n.String="string",n.JSON="json";var o=function(){function n(){}return n.uniqueId=function(t){void 0===t&&(t=null);var e=++n._idCounter;return null!=t?String(t+e):e},n.deletePropertyFromObject=function(t,e){var o=e instanceof Array?e:[e];return Object.keys(t).forEach(function(e){var r=t[e];!0===o.includes(e)?delete t[e]:r instanceof Array?r.forEach(function(t){return n.deletePropertyFromObject(t,o)}):r instanceof Object&&n.deletePropertyFromObject(r,o)}),t},n.clone=function(t,e){if(void 0===e&&(e=null),null===t||void 0===t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);if(t instanceof Array)return t.map(function(t){return n.clone(t,e)});if(t instanceof Object){var o={};return Object.keys(t).forEach(function(r){var i=null!==e?e(r):r;o[i]=n.clone(t[r],e)}),o}throw new Error("Unable to copy. "+t+" isn't supported.")},n.toBoolean=function(t){var n="string"==typeof t?t.toLowerCase():t;return!(null==n||n<=0||"false"===n||"off"===n)},n.convertDataUsingConversionOptions=function(t,e){Object.keys(e).forEach(function(o){if(!t.hasOwnProperty(o))throw new SyntaxError('Conversion property name "'+o+'" does not match a property name on the model.');var r=t[o],i=e[o];t[o]=n.convertDataToConversionType(r,i)})},n.convertDataToConversionType=function(e,o){switch(o){case t.ConversionTypeEnum.Boolean:return n.toBoolean(e);case t.ConversionTypeEnum.Float:return null===e?null:parseFloat(e);case t.ConversionTypeEnum.Number:return null===e?null:parseInt(e,10);case t.ConversionTypeEnum.String:return null===e?null:String(e);case t.ConversionTypeEnum.JSON:return null==e?null:JSON.parse(e);default:return e}},n._idCounter=0,n}(),r=function(t){function n(n){void 0===n&&(n={});var e=t.call(this)||this;return e.sjsOptions={expand:!1},e.sjsOptions.expand=!0===n.expand,e}return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}(n,t),n.prototype.update=function(t,n){var e=this;void 0===t&&(t={}),void 0===n&&(n={});var r=this._isObject(t,!0)?t:{};return Object.keys(this).forEach(function(t){if("sjsId"!==t&&"sjsOptions"!==t){var n=e[t],o=r[t];e[t]=e._getPropertyData(n,o)}}),o.convertDataUsingConversionOptions(this,n),this},n.prototype.toJSON=function(){var t=o.clone(this);return o.deletePropertyFromObject(t,["sjsId","sjsOptions"])},n.prototype.toJSONString=function(){return JSON.stringify(this.toJSON())},n.prototype.fromJSON=function(t){var n=JSON.parse(t);return this.update(n),this},n.prototype.clone=function(){return new this.constructor(this)},n.prototype._getPropertyData=function(t,n){var e=this;if(!0===Array.isArray(t)){var o=t[0],r=this._isBaseModelObject(o),i=this._isBaseModelClass(o);if(null==n&&!0===i)return[];if(null==n)return t;var s=!1===Array.isArray(n)?[n]:n;return!0===i?s.map(function(t){return new o(t,e.sjsOptions)}):!0===r?s.map(function(t){return new o.constructor(t,e.sjsOptions)}):s}return null==n?this._updateData(t,null):this._updateData(t,n)},n.prototype._updateData=function(t,n){var e=this._isBaseModelObject(t),o=this._isBaseModelClass(t),r=this._isObjectWithProperties(n);if(!0===e&&!0===r){var i=t;return i.update(n),i}return!0!==o||!0!==r&&!0!==this.sjsOptions.expand?!0===o?null:null!=n?n:t:new t(r?n:{},this.sjsOptions)},n.prototype._isBaseModelClass=function(t){return"function"==typeof t&&!0===t.IS_BASE_MODEL},n.prototype._isBaseModelObject=function(t){return t instanceof n},n.prototype._isObjectWithProperties=function(t){return this._isObject(t)&&Object.keys(t).length>0},n.prototype._isObject=function(t,n){void 0===n&&(n=!1);var e=Boolean(t)&&!1===Array.isArray(t)&&"object"==typeof t;return!1===e&&!0===n&&console.error("Something is wrong! "+this.getClassName()+' only allows Objects but "'+t+'" was passed in.'),e},n.IS_BASE_MODEL=!0,n}(function(){function t(){this.sjsId=null,this.sjsId=o.uniqueId()}return t.prototype.destroy=function(){var t=this;Object.keys(this).filter(function(t){return"sjsId"!==t}).forEach(function(n){return t[n]=null})},t.prototype.getClassName=function(){return this.constructor.name},t}());t.BaseModel=r,t.Util=o,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map

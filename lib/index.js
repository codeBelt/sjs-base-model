!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.SjsBaseModel={})}(this,function(t){"use strict";var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};var n=function(){function t(){}return t.uniqueId=function(e){void 0===e&&(e=null);var n=++t._idCounter;return null!=e?String(e+n):n},t.deletePropertyFromObject=function(e,n){var r=n instanceof Array?n:[n];return Object.keys(e).forEach(function(n){var o=e[n];!0===r.includes(n)?delete e[n]:o instanceof Array?o.forEach(function(e){return t.deletePropertyFromObject(e,r)}):o instanceof Object&&t.deletePropertyFromObject(o,r)}),e},t.clone=function(e,n){if(void 0===n&&(n=null),null===e||void 0===e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e);if(e instanceof Array)return e.map(function(e){return t.clone(e,n)});if(e instanceof Object){var r={};return Object.keys(e).forEach(function(o){var i=null!==n?n(o):o;r[i]=t.clone(e[o],n)}),r}throw new Error("Unable to copy. "+e+" isn't supported.")},t._idCounter=0,t}(),r=function(t){function r(e){void 0===e&&(e={});var n=t.call(this)||this;return n.sjsOptions={expand:!1},n.sjsOptions.expand=!0===e.expand,n}return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(r,t),r.prototype.update=function(t){var e=this;void 0===t&&(t={});var n=this._isObject(t,!0)?t:{};return Object.keys(this).forEach(function(t){if("sjsId"!==t&&"sjsOptions"!==t){var r=e[t],o=n[t];e[t]=e._getPropertyData(r,o)}}),this},r.prototype.toJSON=function(){var t=n.clone(this);return n.deletePropertyFromObject(t,["sjsId","sjsOptions"])},r.prototype.toJSONString=function(){return JSON.stringify(this.toJSON())},r.prototype.fromJSON=function(t){var e=JSON.parse(t);return this.update(e),this},r.prototype.clone=function(){return new this.constructor(this)},r.prototype._getPropertyData=function(t,e){var n=this;if(!0===Array.isArray(t)){var r=t[0],o=this._isBaseModelObject(r),i=this._isBaseModelClass(r);if(null==e&&!0===i)return[];if(null==e)return t;var s=!1===Array.isArray(e)?[e]:e;return!0===i?s.map(function(t){return new r(t,n.sjsOptions)}):!0===o?s.map(function(t){return new r.constructor(t,n.sjsOptions)}):s}return null==e?this._updateData(t,null):this._updateData(t,e)},r.prototype._updateData=function(t,e){var n=this._isBaseModelObject(t),r=this._isBaseModelClass(t),o=this._isObjectWithProperties(e);if(!0===n&&!0===o){var i=t;return i.update(e),i}return!0!==r||!0!==o&&!0!==this.sjsOptions.expand?!0===r?null:null!=e?e:t:new t(o?e:{},this.sjsOptions)},r.prototype._isBaseModelClass=function(t){return"function"==typeof t&&!0===t.IS_BASE_MODEL},r.prototype._isBaseModelObject=function(t){return t instanceof r},r.prototype._isObjectWithProperties=function(t){return this._isObject(t)&&Object.keys(t).length>0},r.prototype._isObject=function(t,e){void 0===e&&(e=!1);var n=Boolean(t)&&!1===Array.isArray(t)&&"object"==typeof t;return!1===n&&!0===e&&console.error("Something is wrong! "+this.getClassName()+' only allows Objects but "'+t+'" was passed in.'),n},r.IS_BASE_MODEL=!0,r}(function(){function t(){this.sjsId=null,this.sjsId=n.uniqueId()}return t.prototype.destroy=function(){var t=this;Object.keys(this).filter(function(t){return"sjsId"!==t}).forEach(function(e){return t[e]=null})},t.prototype.getClassName=function(){return this.constructor.name},t}());t.BaseModel=r,t.Util=n,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map

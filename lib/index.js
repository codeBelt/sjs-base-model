!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.SjsBaseModel={})}(this,function(t){"use strict";var e,n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};(e=t.ConversionTypeEnum||(t.ConversionTypeEnum={})).Number="number",e.Float="float",e.Boolean="boolean";var o=function(){function e(){}return e.uniqueId=function(t){void 0===t&&(t=null);var n=++e._idCounter;return null!=t?String(t+n):n},e.deletePropertyFromObject=function(t,n){var o=n instanceof Array?n:[n];return Object.keys(t).forEach(function(n){var r=t[n];!0===o.includes(n)?delete t[n]:r instanceof Array?r.forEach(function(t){return e.deletePropertyFromObject(t,o)}):r instanceof Object&&e.deletePropertyFromObject(r,o)}),t},e.clone=function(t,n){if(void 0===n&&(n=null),null===t||void 0===t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return new RegExp(t);if(t instanceof Array)return t.map(function(t){return e.clone(t,n)});if(t instanceof Object){var o={};return Object.keys(t).forEach(function(r){var i=null!==n?n(r):r;o[i]=e.clone(t[r],n)}),o}throw new Error("Unable to copy. "+t+" isn't supported.")},e.toBoolean=function(t){var e="string"==typeof t?t.toLowerCase():t;return!(null==e||e<=0||"false"===e||"off"===e)},e.convertDataUsingOptions=function(t,n){Object.keys(n).forEach(function(o){if(t.hasOwnProperty(o)){var r=t[o],i=n[o];t[o]=e.convertDataToType(r,i)}})},e.convertDataToType=function(n,o){switch(o){case t.ConversionTypeEnum.Boolean:return e.toBoolean(n);case t.ConversionTypeEnum.Float:return null===n?n:parseFloat(n);case t.ConversionTypeEnum.Number:return null===n?n:parseInt(n,10);default:return n}},e._idCounter=0,e}(),r=function(t){function e(e){void 0===e&&(e={});var n=t.call(this)||this;return n.sjsOptions={expand:!1},n.sjsOptions.expand=!0===e.expand,n}return function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}(e,t),e.prototype.update=function(t,e){var n=this;void 0===t&&(t={}),void 0===e&&(e={});var r=this._isObject(t,!0)?t:{};return Object.keys(this).forEach(function(t){if("sjsId"!==t&&"sjsOptions"!==t){var e=n[t],o=r[t];n[t]=n._getPropertyData(e,o)}}),o.convertDataUsingOptions(this,e),this},e.prototype.toJSON=function(){var t=o.clone(this);return o.deletePropertyFromObject(t,["sjsId","sjsOptions"])},e.prototype.toJSONString=function(){return JSON.stringify(this.toJSON())},e.prototype.fromJSON=function(t){var e=JSON.parse(t);return this.update(e),this},e.prototype.clone=function(){return new this.constructor(this)},e.prototype._getPropertyData=function(t,e){var n=this;if(!0===Array.isArray(t)){var o=t[0],r=this._isBaseModelObject(o),i=this._isBaseModelClass(o);if(null==e&&!0===i)return[];if(null==e)return t;var s=!1===Array.isArray(e)?[e]:e;return!0===i?s.map(function(t){return new o(t,n.sjsOptions)}):!0===r?s.map(function(t){return new o.constructor(t,n.sjsOptions)}):s}return null==e?this._updateData(t,null):this._updateData(t,e)},e.prototype._updateData=function(t,e){var n=this._isBaseModelObject(t),o=this._isBaseModelClass(t),r=this._isObjectWithProperties(e);if(!0===n&&!0===r){var i=t;return i.update(e),i}return!0!==o||!0!==r&&!0!==this.sjsOptions.expand?!0===o?null:null!=e?e:t:new t(r?e:{},this.sjsOptions)},e.prototype._isBaseModelClass=function(t){return"function"==typeof t&&!0===t.IS_BASE_MODEL},e.prototype._isBaseModelObject=function(t){return t instanceof e},e.prototype._isObjectWithProperties=function(t){return this._isObject(t)&&Object.keys(t).length>0},e.prototype._isObject=function(t,e){void 0===e&&(e=!1);var n=Boolean(t)&&!1===Array.isArray(t)&&"object"==typeof t;return!1===n&&!0===e&&console.error("Something is wrong! "+this.getClassName()+' only allows Objects but "'+t+'" was passed in.'),n},e.IS_BASE_MODEL=!0,e}(function(){function t(){this.sjsId=null,this.sjsId=o.uniqueId()}return t.prototype.destroy=function(){var t=this;Object.keys(this).filter(function(t){return"sjsId"!==t}).forEach(function(e){return t[e]=null})},t.prototype.getClassName=function(){return this.constructor.name},t}());t.BaseModel=r,t.Util=o,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index.js.map
